# Fleet Overview

<div class="aic-stack">

!!! info "At-a-glance"
    **Total:** {{ stats.total }} · **Online:** {{ stats.green }} · **Warning:** {{ stats.yellow }} · **Offline:** {{ stats.red }}

<div class="aic-filters" role="region" aria-label="Fleet filters">
  <div class="aic-field">
    <label for="aicSearch">Search</label>
    <input id="aicSearch" type="search" placeholder="Name, manufacturer, modality…" autocomplete="off" />
  </div>

  <div class="aic-field">
    <label for="aicModality">Modality</label>
    <select id="aicModality">
      <option value="all">All modalities</option>
      {% for mod in all_modalities %}
      <option value="{{ mod | lower }}">{{ mod }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="aic-field">
    <label for="aicStatus">Status</label>
    <select id="aicStatus">
      <option value="all">All statuses</option>
      <option value="green">Online</option>
      <option value="yellow">Warning</option>
      <option value="red">Offline</option>
    </select>
  </div>

  <button class="aic-button" id="aicReset" type="button">Reset</button>
</div>

<div class="aic-grid" aria-label="Microscope cards">
  {% for inst in instruments %}
  <a
    class="aic-card aic-card--link"
    href="instruments/{{ inst.id }}/"
    aria-label="Open {{ inst.display_name }}"
    data-filterable="true"
    data-name="{{ inst.display_name }}"
    data-manufacturer="{{ inst.manufacturer }}"
    data-modalities="{{ inst.modalities | join(',') | lower }}"
    data-status="{{ inst.status.color }}"
  >
    <img
      class="aic-card__media"
      src="assets/images/{{ inst.image_filename }}"
      alt="{{ inst.display_name }}"
      loading="lazy"
      onerror="this.onerror=null; this.src='assets/images/placeholder.svg';"
    />

    <div class="aic-card__body">
      <div class="aic-card__title">
        {{ inst.display_name }}
        <span class="aic-chip aic-chip--status aic-chip--{{ inst.status.color }}" title="{{ inst.status.reason }}">{{ inst.status.badge }}</span>
      </div>

      <div class="aic-muted" style="margin: .25rem 0 .55rem;">
        {{ inst.manufacturer | default('—', true) }}{% if inst.model %} · {{ inst.model }}{% endif %}
      </div>

      <div class="aic-inline" style="margin-bottom: .55rem;">
        {% for mod in inst.modalities %}
        <span class="aic-chip">{{ mod }}</span>
        {% else %}
        <span class="aic-muted">No modalities tagged</span>
        {% endfor %}
      </div>

      <div class="aic-kv">
        <div>Last QC</div><div>{{ inst.status.last_qc_date | default('—', true) }}</div>
        <div>Last maint.</div><div>{{ inst.status.last_maint_date | default('—', true) }}</div>
      </div>
    </div>
  </a>
  {% endfor %}
</div>

</div>
