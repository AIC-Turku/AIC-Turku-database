# Instrument Fleet Overview

<div style="margin-bottom: 20px;">
    <label for="modalityFilter"><strong>Filter by Modality: </strong></label>
    <select id="modalityFilter" style="padding: 5px; border-radius: 4px;">
        <option value="all">All Modalities</option>
        {% for mod in all_modalities %}
        <option value="{{ mod | lower }}">{{ mod }}</option>
        {% endfor %}
    </select>
</div>

<div class="microscope-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px;">
    {% for inst in instruments %}
    <div class="microscope-card" data-modalities="{{ inst.instrument.modalities | join(',') | lower }}" style="border: 1px solid #ddd; border-radius: 8px; padding: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); background-color: var(--md-default-bg-color);">
        
        <img src="assets/images/{{ inst.image_filename }}" 
             style="width: 100%; height: 180px; object-fit: cover; border-radius: 6px; margin-bottom: 10px;" 
             onerror="this.src='assets/images/placeholder.png'" 
             alt="{{ inst.display_name }}">
             
        <div style="font-size: 1.1em; font-weight: bold; margin-bottom: 5px;">
            <a href="instruments/{{ inst.id }}/spec.md">{{ inst.display_name }}</a>
        </div>
        <div style="margin-bottom: 5px;">{{ inst.status.badge }}</div>
        <div style="font-size: 0.9em; color: gray;">
            <strong>Modalities:</strong> {{ inst.instrument.modalities | join(', ') | default("None") }}
        </div>
    </div>
    {% endfor %}
</div>

<script>
document.getElementById('modalityFilter').addEventListener('change', function(e) {
    const selected = e.target.value;
    const cards = document.querySelectorAll('.microscope-card');
    
    cards.forEach(card => {
        const modalities = card.getAttribute('data-modalities');
        if (selected === 'all' || modalities.includes(selected)) {
            card.style.display = 'block';
        } else {
            card.style.display = 'none';
        }
    });
});
</script>
